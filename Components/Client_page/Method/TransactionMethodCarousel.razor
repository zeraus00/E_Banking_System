@using E_BankingSystem.Components.Client_page.Method;
@inject NavigationManager NavigationManager

<div class="d-flex text-light justify-content-start gap-3 mx-5">
    @foreach (var card in Cards){
        <div class="shipping-container d-flex justify-content-between align-items-center p-3 border rounded bg-light gap-3">

            <div>
                <div class="d-flex align-items-center">
                    <img class="logo mx-3" src="@card.LogoUrl" alt="@card.Name Logo" />
                    <div>
                        <h6 class="mb-0">@card.Name</h6>
                    </div>
                </div>
            </div>

            <!-- radio button -->
            @if(transactionProcess){
                <div class="form-check">
                    <input class="form-check-input"
                           type="radio"
                           name="selectedCard"
                           id="@card.Id"
                           value="@card.Id"
                           checked="@((selectedCardId == card.Id))"
                           @onchange="@(() => selectedCardId = card.Id)" />
                    <label class="form-check-label" for="@card.Id"></label>
                </div>
            }

        </div>
    }
</div>

@code {
    private bool transactionProcess = false;
    private string? selectedCardId;

    private List<CardModel> Cards = new()
    {
        new CardModel { Id = "gcash", Name = "GCash", LogoUrl = "/gcash" },
        new CardModel { Id = "paymaya", Name = "PayMaya", LogoUrl = "/paymaya.jpg" },
        new CardModel { Id = "gotyme", Name = "GoTyme", LogoUrl = "/gotyme.png" }
    };
    
    protected override void OnInitialized()
    {
        if (NavigationManager.Uri.Contains("/Withdraw_amount") ||
        NavigationManager.Uri.Contains("/Deposit_amount"))
        {
            transactionProcess = true;
        }
    }

    public class CardModel
    {
        public string Id { get; set; } = string.Empty;
        public string Name { get; set; } = string.Empty;
        public string LogoUrl { get; set; } = string.Empty;
    }
}