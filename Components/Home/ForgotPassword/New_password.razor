@page "/New_password"
@using Layout
@rendermode InteractiveServer
@inject NavigationManager NavigationManager
@layout PlainLayout

<div class="page">
	<main>
		<!-- Reset Password Card Container -->
		<div class="card new_password shadow-lg">
			<div>
				<h3 class="text-start fw-bold text-light mt-5 mx-5">Reset Password</h3>

				<!-- Password Conditions -->
				<h5 class="text-start fw-light text-light my-3 mx-5">
					Password must include:
				</h5>
				<ul class="fs-6 fw-light mx-5">
					<li>At least 8-12 characters.</li>
					<li>At least one uppercase letter (A-Z).</li>
					<li>At least one lowercase letter (a-z).</li>
					<li>At least one number (0-9).</li>
					<li>At least one special character.</li>
				</ul>
			</div>

			<!-- Password Input Fields -->
			<div class="loginform sm mt-1">
				<div class="position-relative">
					<input type="@newPasswordInputType"
						   @bind="newPassword"
						   class="form-control form-control-custom form-control-lg mb-3"
						   placeholder="New Password">
					<button type="button"
							class="btn position-absolute end-0 top-50 translate-middle-y me-3 p-0 border-0 bg-transparent"
							style="z-index: 10;"
							@onclick="ToggleNewPasswordVisibility">
						<i class="bi @newPasswordEyeIconClass text-muted"></i>
					</button>
				</div>

				<div class="position-relative">
					<input type="@confirmNewPasswordInputType"
						   @bind="confirmNewPassword"
						   class="form-control form-control-custom form-control-lg mb-3"
						   placeholder="Confirm New Password">
					<button type="button"
							class="btn position-absolute end-0 top-50 translate-middle-y me-3 p-0 border-0 bg-transparent"
							style="z-index: 10;"
							@onclick="ToggleConfirmNewPasswordVisibility">
						<i class="bi @confirmNewPasswordEyeIconClass text-muted"></i>
					</button>
				</div>
			</div>

			<!-- Reset Password Button -->
			<NavLink class="d-grid col-5 mx-auto mb-5" href="/">
				<button class="btn btn-primary">Reset Password</button>
			</NavLink>

		</div>

	</main>
</div>

@code {
	// Password states
	private string newPassword = "";
	private string confirmNewPassword = "";

	// New password toggler
	private string newPasswordInputType = "password";
	private string newPasswordEyeIconClass = "bi-eye-slash";

	// Confirm new password toggler
	private string confirmNewPasswordInputType = "password";
	private string confirmNewPasswordEyeIconClass = "bi-eye-slash";

	// New password toggle visibility
	private void ToggleNewPasswordVisibility()
	{
		if (newPasswordInputType == "password")
		{
			newPasswordInputType = "text";
			newPasswordEyeIconClass = "bi-eye";
		}
		else
		{
			newPasswordInputType = "password";
			newPasswordEyeIconClass = "bi-eye-slash";
		}
	}

	// Confirm new password toggle visibility
	private void ToggleConfirmNewPasswordVisibility()
	{
		if (confirmNewPasswordInputType == "password")
		{
			confirmNewPasswordInputType = "text";
			confirmNewPasswordEyeIconClass = "bi-eye";
		}
		else
		{
			confirmNewPasswordInputType = "password";
			confirmNewPasswordEyeIconClass = "bi-eye-slash";
		}
	}
}
