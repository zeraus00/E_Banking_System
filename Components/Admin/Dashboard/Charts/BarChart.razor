@using E_BankingSystem.Components.Admin.Dashboard.Charts
@using ViewModels.AdminDashboard

@inject IJSRuntime JSRuntime

<canvas id="barChart"></canvas>

@code {
    [Parameter]
    public List<string> Labels { get; set; } = new();

    [Parameter]
    public List<List<DataUnit>> Data { get; set; } = new();

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (Labels.Count > 0 && Data.Count > 0)
        {
            var dataSets = Enumerable.Range(0, Data[0].Count)
                .Select(col => Data.Select(row => row[col])).ToList();
            var dataSet1 = Data.Select(row => row[0].Value).ToList();
            var dataSet2 = Data.Select(row => row[1].Value).ToList();
            var dataSet3 = Data.Select(row => row[2].Value).ToList();
            await JSRuntime.InvokeVoidAsync("drawDashboardBarChart", Labels, dataSet1, dataSet2, dataSet3);
        }
    }
}
